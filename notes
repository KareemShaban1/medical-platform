-- notes
database tables:

/// market place
- products (id , name ,  )
- orders
- order items
- cart
- cart items
- suppliers (auth)
- suppliers_users
- categores
- product_categories
- module_approvement
- admins (auth)
- doctors 
- contacts 


// rents
- rental_spaces
- rental_avalibalities
- rental_pricings
- rental_bookings
- media
- rental_reviews (not required)


// tickets
- purchase_requests
- supplier_offer
- media
- offer_comments (optional)
- accepted_offers


// jobs
- jobs
- job_applications


// courses
- courses
- course_enrollments

// blog
- blog categories
- blog posts

// clinics
- clinics (auth)
- clinics_users
- users_salaries
- roles 
- permissions
- patients (auth) (guest)
- appointments
- clinic_inventories
- clinic_inventories_movments
- lab_orders 


// subscription
- subscription_plans
- plan_features
- user_subscriptions




--------------------------------------------------------------------------------------------------------------


------------- ðŸ›’ Marketplace Module ------------
--- required tables in module : 
--- admins, suppliers, suppliers_users, clinic_users, clinics , module_approvement
--- contacts , categories, products , product_categories, cart, cart_items , orders , order_items

admins (auth)
  id â†’ bigint (PK)
  name â†’ varchar(255)
  email â†’ varchar(255) unique
  password â†’ varchar(255)
  created_at, updated_at

categories
  id â†’ bigint (PK)
  name â†’ varchar(255)
  slug â†’ varchar(255) unique
  created_at, updated_at

products
  id â†’ bigint (PK, auto increment)
  supplier_id â†’ bigint (FK â†’ suppliers)
  name â†’ varchar(255)
  description â†’ text
  sku â†’ varchar(100) (unique)
  price_before â†’ decimal(10,2)
  price_after â†’ decimal(10,2)
  discount_value â†’ decimal(10,2), nullable
  stock â†’ int
  approved â†’ boolean (default false, admin approval)
  status â†’ boolean (default true)  -- (active or not)
  created_at, updated_at

product_categories
  id â†’ bigint (PK)
  product_id â†’ bigint (FK â†’ products)
  category_id â†’ bigint (FK â†’ categories)

orders
  id â†’ bigint (PK)
  clinic_user_id â†’ bigint (FK â†’ clinic_users)
  clinic_id â†’ bigint (FK â†’ clinics)
  status â†’ enum(â€˜pendingâ€™, â€˜processingâ€™, â€˜completedâ€™, â€˜canceledâ€™)
  total â†’ decimal(10,2)
  payment_method â†’ enum(â€˜cardâ€™, â€˜cashâ€™, â€˜walletâ€™)
  created_at, updated_at

order_items
  id â†’ bigint (PK)
  order_id â†’ bigint (FK â†’ orders)
  product_id â†’ bigint (FK â†’ products)
  quantity â†’ int
  price â†’ decimal(10,2)

cart
  id â†’ bigint (PK)
  uuid â†’ varchar(255) (unique)
  clinic_user_id â†’ bigint (FK â†’ clinic_users)
  clinic_id â†’ bigint (FK â†’ clinics)
  created_at, updated_at

cart_items
  id â†’ bigint (PK)
  cart_id â†’ bigint (FK â†’ cart)
  product_id â†’ bigint (FK â†’ products)
  quantity â†’ int

suppliers (auth)
  id â†’ bigint (PK)
  name â†’ varchar(255)
  phone â†’ varchar(50)
  address â†’ text
  approved â†’ boolean (admin approval)
  created_at, updated_at

supplier_users
  id â†’ bigint (PK)
  supplier_id â†’ bigint (FK â†’ suppliers)
  name â†’ varchar(255)
  email â†’ varchar(255)
  password â†’ varchar(255)
  created_at, updated_at

module_approvement
  id â†’ bigint (PK)
  module â†’ nullableMorphs (module_type, module_id)
  approved_by â†’ bigint (FK â†’ admins)
  status â†’ enum(â€˜pendingâ€™, â€˜approvedâ€™, â€˜rejectedâ€™)
  notes â†’ text nullable
  created_at, updated_at

contacts
  id â†’ bigint (PK)
  module â†’ nullableMorphs (module_type, module_id)
  key â†’ enum(â€˜phoneâ€™, â€˜emailâ€™)
  value â†’ text
  status â†’ enum(â€˜pendingâ€™, â€˜readâ€™, â€˜repliedâ€™)
  created_at, updated_at


--------------------------------------------------------------------------------------------------------------

-------------- clinic module ------------
--- required tables in module : 
--- admins, clinics, clinic_users ,clinic_user_salaries , patients, doctors
--- clinic_inventories, clinic_inventories_movments , appointments, lab_orders,
--- [roles, permissions , media] => packages tables


- clinics (auth)
  id â†’ bigint (PK)
  name â†’ varchar(255)
  phone â†’ varchar(50)
  address â†’ text
  approved â†’ boolean
  status â†’ boolean (default true) -- (active or not)
  created_at, updated_at  

- clinic_users
  id â†’ bigint (PK)
  clinic_id â†’ bigint (FK â†’ clinics)
  email â†’ varchar(255) unique
  password â†’ varchar(255)
  status â†’ boolean (default true) -- (active or not)
  salary_frequency â†’ enum(â€˜dailyâ€™, â€˜weeklyâ€™, â€˜monthlyâ€™)
  amount_per_salary_frequency â†’ decimal(10,2) nullable
  created_at, updated_at

- clinic_user_salaries
  id â†’ bigint (PK)
  clinic_user_id â†’ bigint (FK â†’ clinic_users)
  amount â†’ decimal(10,2)
  salary_frequency â†’ enum(â€˜dailyâ€™, â€˜weeklyâ€™, â€˜monthlyâ€™)
  amount_per_salary_frequency â†’ decimal(10,2)
  start_date â†’ date
  end_date â†’ date nullable
  paid â†’ boolean (default false)
  notes â†’ text nullable
  created_at, updated_at
 
- doctors
  id â†’ bigint (PK)
  clinic_user_id â†’ bigint (FK â†’ clinic_users)
  name â†’ varchar(255)
  specialization â†’ varchar(255)
  bio â†’ text
  email â†’ varchar(255) unique
  password â†’ varchar(255)
  phone â†’ varchar(50)
  approved â†’ boolean
  created_at, updated_at

- clinic_inventories  
  id â†’ bigint (PK)
  clinic_id â†’ bigint (FK â†’ clinics)
  item_name â†’ varchar(255)
  quantity â†’ int
  unit â†’ varchar(50) -- (piece, kg, g, ml, l, etc.)
  created_at, updated_at

- clinic_inventories_movments
  id â†’ bigint (PK)
  clinic_inventory_id â†’ bigint (FK â†’ clinic_inventories) (item id)
  quantity â†’ int
  type â†’ enum(â€˜inâ€™, â€˜outâ€™)
  notes â†’ text nullable
  created_at, updated_at  

- patients
  id â†’ bigint (PK)
  clinic_id â†’ bigint (FK â†’ clinics) (optional)
  name â†’ varchar(255)
  email â†’ varchar(255) unique
  password â†’ varchar(255)
  phone â†’ varchar(50)
  created_at, updated_at

- appointments
  id â†’ bigint (PK)
  doctor_id â†’ bigint (FK â†’ doctors)
  patient_id â†’ bigint (FK â†’ patients)
  date â†’ date
  time â†’ time
  notes â†’ text nullable
  status â†’ enum(â€˜pendingâ€™, â€˜confirmedâ€™, â€˜canceledâ€™)
  created_at, updated_at

- lab_orders
  id â†’ bigint (PK)
  patient_id â†’ bigint (FK â†’ patients)
  doctor_id â†’ bigint (FK â†’ doctors)
  lab_test â†’ varchar(255)
  report â†’ text nullable
  notes â†’ text nullable
  image â†’ varchar(255) nullable
  status â†’ enum(â€˜pendingâ€™, â€˜completedâ€™)
  created_at, updated_at


--------------------------------------------------------------------------------------------------------------

-------------- job module ------------
--- required tables in module : 
--- admins, clinics, clinic_users , jobs, job_applications 

- jobs
  id â†’ bigint (PK)
  clinic_id â†’ bigint (FK â†’ clinics)
  title â†’ varchar(255)
  description â†’ text
  location â†’ varchar(255)
  salary â†’ decimal(10,2)
  approved â†’ boolean (default false, admin approval)
  status â†’ boolean (default true) -- (active or not)
  created_at, updated_at

- job_applications
  id â†’ bigint (PK)
  job_id â†’ bigint (FK â†’ jobs)
  clinic_user_id â†’ bigint (FK â†’ clinic_users)
  cv â†’ varchar(255) nullable
  status â†’ enum(â€˜pendingâ€™, â€˜interviewedâ€™, â€˜hiredâ€™)
  notes â†’ text nullable
  [applicant_data â†’ json nullable] -- (name, phone, email)
  created_at, updated_at


--------------------------------------------------------------------------------------------------------------

-------------- courses module ------------
--- required tables in module : 
--- admins, clinics, clinic_users , doctors , courses, course_applications 

- courses
  id â†’ bigint (PK)
  title â†’ varchar(255)
  description â†’ text
  url â†’ varchar(255)
  duration â†’ varchar(50) -- (hours, days, weeks, months)
  start_date â†’ date
  end_date â†’ date nullable
  image â†’ varchar(255) nullable  -- [media]
  approved â†’ boolean (default false, admin approval)
  status â†’ boolean (default true) -- (active or not)
  created_at, updated_at

- course_enrollments
  id â†’ bigint (PK)
  course_id â†’ bigint (FK â†’ courses)
  clinic_user_id â†’ bigint (FK â†’ clinic_users)
  status â†’ boolean (default true) -- (active or not)
  notes â†’ text nullable
  created_at, updated_at


-----------------------------------------------------------------------------------------------

-------------- Blog module ------------
--- required tables in module : 
--- admins, blogs

- blog_categories
  id â†’ bigint (PK)
  name â†’ varchar(255)
  slug â†’ varchar(255) unique
  approved â†’ boolean (default false, admin approval)
  status â†’ boolean (default true) -- (active or not)
  created_at, updated_at

- blog_posts
  id â†’ bigint (PK)
  category_id â†’ bigint (FK â†’ blog_categories)
  title â†’ varchar(255)
  content â†’ text
  image â†’ varchar(255) nullable  -- [media]
  approved â†’ boolean (default false, admin approval)
  status â†’ boolean (default true) -- (active or not)
  created_at, updated_at


-----------------------------------------------------------------------------------------------------
-------------- Tickets module ------------
--- required tables in module : 
--- admins , clinics , suppliers , purchase_requests , supplier_offers , offer_comments , accepted_offers , media

- purchase_requests
  id â†’ bigint (PK)
  clinic_id â†’ bigint (FK â†’ clinics)
  title â†’ varchar(255)
  content â†’ text
  notes â†’ text nullable
  approved â†’ boolean (default false, admin approval)
  status â†’ boolean (default true) -- (active or not)
  created_at, updated_at

- supplier_offers
  id â†’ bigint (PK)
  purchase_request_id â†’ bigint (FK â†’ purchase_requests)
  supplier_user_id â†’ bigint (FK â†’ supplier_users)
  content â†’ text
  notes â†’ text nullable
  price â†’ decimal(10,2)
  approved â†’ boolean (default false, admin approval)
  created_at, updated_at

- offer_comments
  id â†’ bigint (PK)
  supplier_offer_id â†’ bigint (FK â†’ supplier_offers)
  supplier_user_id â†’ bigint (FK â†’ supplier_users)
  clinic_user_id â†’ bigint (FK â†’ clinic_users)
  content â†’ text
  created_at, updated_at

- accepted_offers
  id â†’ bigint (PK)
  purchase_request_id â†’ bigint (FK â†’ purchase_requests)
  supplier_offer_id â†’ bigint (FK â†’ supplier_offers)
  supplier_user_id â†’ bigint (FK â†’ supplier_users)
  clinic_user_id â†’ bigint (FK â†’ clinic_users)
  price â†’ decimal(10,2)
  created_at, updated_at


-----------------------------------------------------------------------------------------------
-------------- Rentals module ------------
--- required tables in module : 
--- admins , clinics , suppliers , rentals_spaces

- rentals_spaces
  id â†’ bigint (PK)
  clinic_id â†’ bigint (FK â†’ clinics)
  name â†’ varchar(255)
  location â†’ varchar(255)
  description â†’ text
  approved â†’ boolean (default false, admin approval)
  status â†’ boolean (default true) -- (active or not)
  created_at, updated_at

- rentals_availabilities
  id â†’ bigint (PK)
  rental_space_id â†’ bigint (FK â†’ rentals_spaces)
  start_date â†’ date
  end_date â†’ date
  time_start â†’ time
  time_end â†’ time
  notes â†’ text nullable
  status â†’ boolean (default true) -- (available or not)
  created_at, updated_at

- rental_pricings
  id â†’ bigint (PK)
  rental_space_id â†’ bigint (FK â†’ rentals_spaces)
  price â†’ decimal(10,2)
  created_at, updated_at

- rental_bookings
  id â†’ bigint (PK)
  rental_space_id â†’ bigint (FK â†’ rentals_spaces)
  booking_user_id â†’ bigint (FK â†’ clinic_users)
  clinic_id â†’ bigint (FK â†’ clinics)
  price â†’ decimal(10,2)
  notes â†’ text nullable
  created_at, updated_at
